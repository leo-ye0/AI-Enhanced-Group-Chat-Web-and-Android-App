<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>StudyPal Chat</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <div class="auth" id="auth">
      <h1>StudyPal Chat</h1>
      <p>Create an account or log in to join the chat.</p>
      <div class="row">
        <input id="username" placeholder="Username">
        <input id="password" placeholder="Password" type="password">
      </div>
      <div class="row">
        <button id="signupBtn">Sign Up</button>
        <button id="loginBtn">Log In</button>
      </div>
      <div class="hint">Hint: Mention @bot to get AI responses. Use /project analyze, /project status, or /tasks for project management.</div>
      <div id="authMsg" class="msg"></div>
    </div>
    <div class="chat hidden" id="chat">
      <div class="header">
        <h2>StudyPal Chat</h2>
        <div class="header-buttons">
          <input type="file" id="fileInput" accept=".pdf,.docx,.txt" style="display: none;">
          <button id="uploadBtn">Upload File</button>
          <button id="clearBtn">Clear Chat</button>
          <button id="logoutBtn">Log Out</button>
        </div>
      </div>
      <div class="chat-container">
        <div id="messages" class="messages"></div>
        <div class="composer">
          <div class="mention-dropdown hidden" id="mentionDropdown"></div>
          <button id="botToggle" class="bot-toggle-btn" title="Toggle bot always-on">ğŸ¤–</button>
          <input id="chatInput" placeholder="Type a messageâ€¦ (use @bot or / for commands)">
          <button id="sendBtn">Send</button>
        </div>
      </div>
    </div>
    <div class="file-preview hidden" id="filePreview">
      <div class="preview-header">
        <h3 id="previewTitle">File Preview</h3>
        <button id="closePreview">Ã—</button>
      </div>
      <div class="preview-content" id="previewContent"></div>
    </div>
    <div class="right-column hidden" id="rightColumn">
      <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <h3>ğŸ“ Uploaded Files</h3>
          <button id="toggleSummaries" class="toggle-btn">Hide Summaries</button>
        </div>
        <div class="file-list" id="fileList">
          <div class="no-files">No files uploaded yet</div>
        </div>
      </div>
      <div class="task-panel" id="taskPanel">
        <div class="task-header">
          <h3>ğŸ“‹ Tasks</h3>
          <button id="addTaskBtn" class="toggle-btn">+ Add</button>
        </div>
        <div style="padding:4px 8px;display:flex;gap:4px;border-bottom:1px solid #e5e7eb">
          <select id="taskSortBy" style="padding:2px 4px;font-size:10px;border:1px solid #ddd;border-radius:3px;flex:1">
            <option value="recent">Recent</option>
            <option value="due_date">Due Date</option>
            <option value="status">Status</option>
          </select>
          <select id="taskFilterUser" style="padding:2px 4px;font-size:10px;border:1px solid #ddd;border-radius:3px;flex:1">
            <option value="all">All</option>
          </select>
          <select id="taskFilterStatus" style="padding:2px 4px;font-size:10px;border:1px solid #ddd;border-radius:3px;flex:1">
            <option value="all">All</option>
            <option value="pending">Pending</option>
            <option value="completed">Done</option>
          </select>
        </div>
        <div class="task-input hidden" id="taskInput">
          <input id="newTaskContent" placeholder="Enter task...">
          <div style="display:flex;gap:4px;margin-top:4px">
            <button id="saveTaskBtn" class="toggle-btn" style="flex:1">Save</button>
            <button id="cancelTaskBtn" class="toggle-btn" style="flex:1">Cancel</button>
          </div>
        </div>
        <div class="task-list" id="taskList">
          <div class="no-tasks">No tasks yet. AI will auto-detect tasks from your messages!</div>
        </div>
      </div>
      <div class="meeting-panel" id="meetingPanel">
        <div class="meeting-header">
          <h3>ğŸ“… Meetings</h3>
          <button id="addMeetingBtn" class="toggle-btn">+ Add</button>
        </div>
        <div class="meeting-list" id="meetingList">
          <div class="no-meetings">No meetings scheduled</div>
        </div>
      </div>
      <input type="file" id="transcriptInput" accept=".txt,.vtt,.srt" style="display:none">
    </div>
    <div class="meeting-modal hidden" id="assignModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ğŸ‘¤ Assign Task</h3>
          <button id="closeAssignModal">Ã—</button>
        </div>
        <div class="modal-body">
          <div id="userCheckboxes"></div>
          <button id="saveAssignBtn" class="toggle-btn" style="width:100%;margin-top:8px">Save Assignment</button>
        </div>
      </div>
    </div>
    <div class="meeting-modal hidden" id="attendeesModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ğŸ‘¥ Meeting Attendees</h3>
          <button id="closeAttendeesModal">Ã—</button>
        </div>
        <div class="modal-body">
          <div id="attendeeCheckboxes"></div>
          <button id="saveAttendeesBtn" class="toggle-btn" style="width:100%;margin-top:8px">Save Attendees</button>
        </div>
      </div>
    </div>
    <div class="meeting-modal hidden" id="dueDateModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ğŸ“… Set Due Date</h3>
          <button id="closeDueDateModal">Ã—</button>
        </div>
        <div class="modal-body">
          <input id="dueDateInput" type="date" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px">
          <button id="saveDueDateBtn" class="toggle-btn" style="width:100%;margin-top:8px">Save Due Date</button>
        </div>
      </div>
    </div>
    <div class="meeting-modal hidden" id="durationModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>â±ï¸ Set Duration</h3>
          <button id="closeDurationModal">Ã—</button>
        </div>
        <div class="modal-body">
          <input id="durationInput" type="number" placeholder="Duration in minutes" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px">
          <button id="saveDurationBtn" class="toggle-btn" style="width:100%;margin-top:8px">Save Duration</button>
        </div>
      </div>
    </div>
    <div class="meeting-modal hidden" id="zoomLinkModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ğŸ”— Update Zoom Link</h3>
          <button id="closeZoomLinkModal">Ã—</button>
        </div>
        <div class="modal-body">
          <input id="zoomLinkInput" type="url" placeholder="Enter Zoom link" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px">
          <button id="saveZoomLinkBtn" class="toggle-btn" style="width:100%;margin-top:8px">Save Zoom Link</button>
        </div>
      </div>
    </div>
    <div class="meeting-modal hidden" id="meetingModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ğŸ“… Schedule Meeting</h3>
          <button id="closeMeetingModal">Ã—</button>
        </div>
        <div class="modal-body">
          <input id="meetingTitle" placeholder="Meeting title">
          <input id="meetingDatetime" type="datetime-local">
          <input id="meetingDuration" type="number" placeholder="Duration (minutes)" value="30">
          <input id="meetingZoomLink" placeholder="Paste your Zoom link (e.g., https://zoom.us/j/123456789)">
          <div style="font-size:11px;opacity:0.7;margin-top:4px">
            ğŸ“ Get your personal Zoom link: <a href="https://zoom.us/profile" target="_blank" style="color:#4f46e5">zoom.us/profile</a> â†’ Personal Meeting ID
          </div>
          <button id="uploadTranscriptBtn" class="toggle-btn" style="width:100%;margin-top:8px;display:none">ğŸ“„ Upload Transcript</button>
          <div id="suggestedTimes" class="suggested-times"></div>
          <button id="createMeetingBtn" class="toggle-btn" style="width:100%;margin-top:8px">Create Meeting</button>
        </div>
      </div>
    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>
